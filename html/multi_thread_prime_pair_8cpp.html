<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Prime Pairs: multiThreadPrimePair.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Prime Pairs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">multiThreadPrimePair.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;vector&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;omp.h&gt;</code><br />
</div>
<p><a href="multi_thread_prime_pair_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Prime Pairs</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpef518143d02fcee665d0d91050d1daf3"></a>Using C++ and OpenMP to have a program calculate the prime numbers up until N and then find the prime pairs out of those Prime numbers, a prime pair is two prime numbers that are exactly 2 different from each other, e.g 3&amp;5 or 5&amp;7 The calculations will be preformed concurrently using openmp to spin up threads and preak the computations up into chunks of the appropriate size for the number of threads. The program is timed to check the scalability of it as both the amount of numbers being calculated and the amount of threads preforming these calculations increase </p>
</td></tr>
<tr class="memitem:aaf3a127bb6f35f982fb654ce4c37480a"><td class="memItemLeft" align="right" valign="top">vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multi_thread_prime_pair_8cpp.html#aaf3a127bb6f35f982fb654ce4c37480a">primes</a></td></tr>
<tr class="separator:aaf3a127bb6f35f982fb654ce4c37480a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49d5158ead5cecf79361acaae5eabd74"><td class="memItemLeft" align="right" valign="top">vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multi_thread_prime_pair_8cpp.html#a49d5158ead5cecf79361acaae5eabd74">primepairs</a></td></tr>
<tr class="separator:a49d5158ead5cecf79361acaae5eabd74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21ab8edacb5862918799e5467b7920f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multi_thread_prime_pair_8cpp.html#a21ab8edacb5862918799e5467b7920f4">calculatePrime</a> (int n)</td></tr>
<tr class="memdesc:a21ab8edacb5862918799e5467b7920f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function will take in a number n and calculate the primes up until that number and add them to the global vector primes  <a href="multi_thread_prime_pair_8cpp.html#a21ab8edacb5862918799e5467b7920f4">More...</a><br /></td></tr>
<tr class="separator:a21ab8edacb5862918799e5467b7920f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dddfddb354b9edaeac1eff51932e891"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multi_thread_prime_pair_8cpp.html#a1dddfddb354b9edaeac1eff51932e891">findPrimePairs</a> ()</td></tr>
<tr class="memdesc:a1dddfddb354b9edaeac1eff51932e891"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function preforms a check on the global vertor primes and looks for prime pairs within it.  <a href="multi_thread_prime_pair_8cpp.html#a1dddfddb354b9edaeac1eff51932e891">More...</a><br /></td></tr>
<tr class="separator:a1dddfddb354b9edaeac1eff51932e891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd8963145126aa0cef3c4079542001c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multi_thread_prime_pair_8cpp.html#adbd8963145126aa0cef3c4079542001c">printPairs</a> ()</td></tr>
<tr class="memdesc:adbd8963145126aa0cef3c4079542001c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to have the vector primepairs out put onto the console.  <a href="multi_thread_prime_pair_8cpp.html#adbd8963145126aa0cef3c4079542001c">More...</a><br /></td></tr>
<tr class="separator:adbd8963145126aa0cef3c4079542001c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multi_thread_prime_pair_8cpp.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ever famous main function that runs our driver to show off primes and OpenMP.  <a href="multi_thread_prime_pair_8cpp.html#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a21ab8edacb5862918799e5467b7920f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21ab8edacb5862918799e5467b7920f4">&#9670;&nbsp;</a></span>calculatePrime()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void calculatePrime </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this function will take in a number n and calculate the primes up until that number and add them to the global vector primes </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>the number entered by the user, used as the upper limit of the calculation of prime numbers</td></tr>
  </table>
  </dd>
</dl>
<p>OpenMP parrallel for is used, we use dynamic scheduling to allow the cpu to assign tasks to threads dynamically, giving faster threads more work and slower threads less work. OpenMp will the split up the for loop into tasks and have the threads preform it in parallel. The inital for loop goes from 2 the smallest prime up until n. inside we have a boolean not_prime, set to an intial value of false. then the inner for loop which is not run concurrently as openmp does not allow for the break statement to be used inside of threaded for loops and as this for loop will terminate once a modulo operation equals 0 the speed up benefit of making this concurrent was not deemed to be necessary. if a prime is found it gets pushed to the global vector primes. The openmp critical annotation is used when pushing values to the vector to avoid race cconditions. </p>

<p class="definition">Definition at line <a class="el" href="multi_thread_prime_pair_8cpp_source.html#l00038">38</a> of file <a class="el" href="multi_thread_prime_pair_8cpp_source.html">multiThreadPrimePair.cpp</a>.</p>

</div>
</div>
<a id="a1dddfddb354b9edaeac1eff51932e891"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dddfddb354b9edaeac1eff51932e891">&#9670;&nbsp;</a></span>findPrimePairs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void findPrimePairs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function preforms a check on the global vertor primes and looks for prime pairs within it. </p>
<p>OpenMP parrallel for is used, and default static scheduling is used as the task here is not intensive. the for loop runs from 0 to the length of the primes vector and checks if a prime +2 is equal in value to its right most neighbour if they are both primes are added to the global primepair vector. The openmp critical annotation is used when pushing values to the vector to avoid race cconditions. </p>

<p class="definition">Definition at line <a class="el" href="multi_thread_prime_pair_8cpp_source.html#l00073">73</a> of file <a class="el" href="multi_thread_prime_pair_8cpp_source.html">multiThreadPrimePair.cpp</a>.</p>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ever famous main function that runs our driver to show off primes and OpenMP. </p>
<p>Take in a number from the user, start the timer using chrono. call the calculatePrime(number) function, sort the vector primes as the threads will have put in the primes out of order. call find <a class="el" href="multi_thread_prime_pair_8cpp.html#a49d5158ead5cecf79361acaae5eabd74">primepairs()</a>, sort primepairs once they have been found for the same reason as they will have been placed in the vector out of order. Then call <a class="el" href="multi_thread_prime_pair_8cpp.html#adbd8963145126aa0cef3c4079542001c" title="Function to have the vector primepairs out put onto the console.">printPairs()</a> and end the timer and calculate the total duration of operations. and the some last print outs displaying the total time, the total prime up to N and the total number of prime pairs </p>

<p class="definition">Definition at line <a class="el" href="multi_thread_prime_pair_8cpp_source.html#l00117">117</a> of file <a class="el" href="multi_thread_prime_pair_8cpp_source.html">multiThreadPrimePair.cpp</a>.</p>

</div>
</div>
<a id="adbd8963145126aa0cef3c4079542001c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbd8963145126aa0cef3c4079542001c">&#9670;&nbsp;</a></span>printPairs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printPairs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to have the vector primepairs out put onto the console. </p>
<p>No need to do this in parallel as the output would be all over the place with each thread doing their own thing, so it is done sequintally. Some flurishes were added to pretty up the printing, but nothing of consequence. </p>

<p class="definition">Definition at line <a class="el" href="multi_thread_prime_pair_8cpp_source.html#l00094">94</a> of file <a class="el" href="multi_thread_prime_pair_8cpp_source.html">multiThreadPrimePair.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a49d5158ead5cecf79361acaae5eabd74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49d5158ead5cecf79361acaae5eabd74">&#9670;&nbsp;</a></span>primepairs</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;int&gt; primepairs</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gloabal vector used to store the prime pairs </p>

<p class="definition">Definition at line <a class="el" href="multi_thread_prime_pair_8cpp_source.html#l00022">22</a> of file <a class="el" href="multi_thread_prime_pair_8cpp_source.html">multiThreadPrimePair.cpp</a>.</p>

</div>
</div>
<a id="aaf3a127bb6f35f982fb654ce4c37480a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3a127bb6f35f982fb654ce4c37480a">&#9670;&nbsp;</a></span>primes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt;int&gt; primes</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gloabal vector used to store the prime numbers </p>

<p class="definition">Definition at line <a class="el" href="multi_thread_prime_pair_8cpp_source.html#l00020">20</a> of file <a class="el" href="multi_thread_prime_pair_8cpp_source.html">multiThreadPrimePair.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
